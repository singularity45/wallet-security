// Optimize contract upgrade process
// Fix compatibility with MetaMask
